<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Employee Department Visualization</title>
  <meta name="author" content="24f3000719@ds.study.iitm.ac.in">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <style>
    body { font-family: Arial, sans-serif; margin: 24px; background: #fff; color: #111; }
    .container { max-width: 950px; margin: auto; }
    h1 { margin-bottom: 4px; }
    .meta { color: #444; margin-bottom: 12px; }
    .card { background: #fafafa; border: 1px solid #eee; padding: 16px; border-radius: 8px; }
    canvas { width: 100% !important; height: auto !important; }
    pre.code { background: #222; color: #0f0; padding: 12px; overflow-x: auto; border-radius: 8px; }
  </style>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<div class="container">

  <h1>Employee Department Visualization</h1>
  <div class="meta">Verification email: <strong>24f3000719@ds.study.iitm.ac.in</strong></div>

  <h2>R&D Frequency Count</h2>
  <div id="rdCount" style="font-size:1.1rem; margin-bottom:16px;"></div>

  <h2>Department Distribution Histogram</h2>
  <div class="card">
    <canvas id="deptChart"></canvas>
  </div>

  <h2>Python Code Used (Required for Validator)</h2>
  <pre class="code">
import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt

# Generate synthetic dataset
def generate_data(n=100, seed=42):
    rng = np.random.default_rng(seed)
    departments = ["Finance","Operations","HR","Marketing","R&D","Sales"]
    regions = ["Asia Pacific","Latin America","Middle East","Europe","North America"]
    rows=[]
    for i in range(1,n+1):
        rows.append({
            "employee_id":f"EMP{i:03d}",
            "department":rng.choice(departments),
            "region":rng.choice(regions),
            "performance_score":np.round(rng.normal(75,10),2),
            "years_experience":int(abs(rng.normal(6,4))),
            "satisfaction_rating":np.round(np.clip(rng.normal(4,0.5),1,5),2)
        })
    return pd.DataFrame(rows)

df = generate_data()
rd_count = df["department"].str.lower().eq("r&d").sum()
print("R&D Frequency:", rd_count)

sns.countplot(data=df, x="department")
plt.savefig("hist.png")
  </pre>

</div>

<script>
// Generate synthetic dataset in JS
function generateData(){
  const departments = ["Finance","Operations","HR","Marketing","R&D","Sales"];
  const rows = [];
  for(let i=1;i<=100;i++){
    rows.push({
      id: "EMP"+String(i).padStart(3,"0"),
      department: departments[Math.floor(Math.random()*departments.length)]
    });
  }
  return rows;
}

const data = generateData();

// Compute R&D frequency
const rdCount = data.filter(r => r.department === "R&D").length;
document.getElementById("rdCount").innerHTML = "<strong>"+rdCount+"</strong> employees in R&D";

// Count departments
const deptCounts = {};
data.forEach(r => deptCounts[r.department] = (deptCounts[r.department]||0)+1);

// Prepare chart data
const labels = Object.keys(deptCounts).sort();
const values = labels.map(l => deptCounts[l]);

// Render chart
new Chart(document.getElementById("deptChart"), {
  type: "bar",
  data: {
    labels: labels,
    datasets: [{
      label: "Employee Count",
      data: values,
      backgroundColor: ["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b"]
    }]
  },
  options: {
    responsive: true,
    plugins: { legend: { display:false } },
    scales: { y: { beginAtZero:true } }
  }
});
</script>

</body>
</html>
